
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Diving behaviour analysis &#8212; skdiveMove 0.1.8 documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/jupyter-sphinx.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Bout analysis" href="boutsdemo.html" />
    <link rel="prev" title="scikit-diveMove Documentation" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="boutsdemo.html" title="Bout analysis"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="scikit-diveMove Documentation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">skdiveMove 0.1.8 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Diving behaviour analysis</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="diving-behaviour-analysis">
<span id="tdrdemo-label"></span><h1>Diving behaviour analysis<a class="headerlink" href="#diving-behaviour-analysis" title="Permalink to this headline">¶</a></h1>
<p>Here is a bird’s-eye view of the functionality of <cite>scikit-diveMove</cite>,
loosely following <cite>diveMove</cite>’s <a class="reference external" href="https://cran.r-project.org/web/packages/diveMove/vignettes/diveMove.pdf">vignette</a>.</p>
<p>Set up the environment.  Consider loading the <cite>logging</cite> module and setting
up a logger to monitor progress to this section.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set up</span>
<span class="kn">import</span> <span class="nn">pkg_resources</span> <span class="k">as</span> <span class="nn">pkg_rsrc</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">skdiveMove</span> <span class="k">as</span> <span class="nn">skdive</span>

<span class="c1"># Declare figure sizes</span>
<span class="n">_FIG1X1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">_FIG2X1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">_FIG3X1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<div class="jupyter_cell docutils container">
<div class="cell_output docutils container">
</div>
</div>
<div class="section" id="reading-data-files">
<h2>Reading data files<a class="headerlink" href="#reading-data-files" title="Permalink to this headline">¶</a></h2>
<p>Load <cite>diveMove</cite>’s example data, using <code class="docutils literal notranslate"><span class="pre">TDR.__init__</span></code> method, and print:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ifile</span> <span class="o">=</span> <span class="p">(</span><span class="n">pkg_rsrc</span>
         <span class="o">.</span><span class="n">resource_filename</span><span class="p">(</span><span class="s2">&quot;skdiveMove&quot;</span><span class="p">,</span>
                            <span class="p">(</span><span class="s2">&quot;tests/data/&quot;</span>
                             <span class="s2">&quot;ag_mk7_2002_022.nc&quot;</span><span class="p">)))</span>
<span class="n">tdrX</span> <span class="o">=</span> <span class="n">skdive</span><span class="o">.</span><span class="n">TDR</span><span class="p">(</span><span class="n">ifile</span><span class="p">,</span> <span class="n">depth_name</span><span class="o">=</span><span class="s2">&quot;depth&quot;</span><span class="p">,</span> <span class="n">has_speed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tdrX</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>Time-Depth Recorder -- Class TDR object
Source File          /opt/hostedtoolcache/Python/3.8.5/x64/lib/python3.8/site-packages/skdiveMove/tests/data/ag_mk7_2002_022.nc
Sampling interval    0 days 00:00:05
Number of Samples    34199
Sampling Begins      2002-01-05 11:32:00
Sampling Ends        2002-01-07 11:01:50
Total duration       1 days 23:29:50
Measured depth range [-4.0,91.0]
Other variables      [&#39;light&#39;, &#39;temperature&#39;, &#39;speed&#39;]
Attributes:
                          animal_id: Ag_022
              animal_species_common: Antarctic fur seal
             animal_species_science: Arctocephalus gazella
                 data_creation_date: 2020-07-13 17:00:00
                        data_format: CSV
                        data_nfiles: 1
                        data_source: dives.csv
       dep_device_regional_settings: YYYY-mm-dd HH:MM:SS
                   dep_device_tzone: +5
                             dep_id: ag_mk7_2002_022
              deploy_device_time_on: 2002-01-05 11:32:00
                         deploy_lat: 51.9833294
                    deploy_locality: Iles Crozet, Southern Indian Ocean
                         deploy_lon: -46.416665
                      deploy_method: glued
                        device_make: Wildlife Computers
                       device_model: MK7
                        device_type: archival
                   project_date_beg: 2000-11-01
                   project_date_end: 2003-04-30
                       project_name: Antarctic and Subantarctic fur seal foraging/energetics
               provider_affiliation: Centre d&#39;Etudes Biologiques de Chize, France
                     provider_email: spluque@gmail.com
                   provider_license: AGPLv3
                      provider_name: Sebastian Luque
                       sensors_list: pressure,light,temperature,speed
ZOC method:          None
ZOC parameters:      None
Wet/Dry parameters:  {}
Dives parameters:    {}
Speed calibration coefficients: (a=None, b=None)
</pre></div>
</div>
</div>
</div>
<p>Notice that <cite>TDR</cite> reads files in <a class="reference external" href="https://www.unidata.ucar.edu/software/netcdf">NetCDF4</a> format, which is a very
versatile file format, and encourages using properly documented data sets.
<cite>skdiveMove</cite> relies on <cite>xarray.Dataset</cite> objects to represent such data
sets.  It is easy to generate a <cite>xarray.Dataset</cite> objects from Pandas
DataFrames by using method <code class="xref py py-meth docutils literal notranslate"><span class="pre">to_xarray()</span></code>. <cite>skdiveMove</cite> documents
processing steps by appending to the <cite>history</cite> attribute, in an effort
towards building metadata standards.</p>
<p>Access measured data:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tdrX</span><span class="o">.</span><span class="n">get_depth</span><span class="p">(</span><span class="s2">&quot;measured&quot;</span><span class="p">)</span>

<span class="c1"># Or simply use function ``skdive.tests.diveMove2skd`` to do the</span>
<span class="c1"># same with this particular data set.</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt, dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;depth&#x27; (date_time: 34199)&gt;
array([+nan, +nan, +nan, ..., +nan, +nan, +nan])
Coordinates:
  * date_time  (date_time) datetime64[ns] 2002-01-05T11:32:00 ... 2002-01-07T...
Attributes:
    sampling:            regular
    sampling_rate:       5
    sampling_rate_unit:  s
    name:                P
    full_name:           Depth
    description:         dive depth
    units:               m H2O
    units_name:          meters H2O (salt)
    units_label:         meters
    column_name:         depth
    axes:                D
    files:               dives.csv</pre><div class='xr-wrap' hidden><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'depth'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>date_time</span>: 34199</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-c72761a5-fce0-42de-8849-c07497eb61c1' class='xr-array-in' type='checkbox' checked><label for='section-c72761a5-fce0-42de-8849-c07497eb61c1' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>nan nan nan nan nan nan nan nan ... nan nan nan nan nan nan nan nan</span></div><div class='xr-array-data'><pre>array([+nan, +nan, +nan, ..., +nan, +nan, +nan])</pre></div></div></li><li class='xr-section-item'><input id='section-d7fabdcc-72b5-4335-8265-14626db5adcd' class='xr-section-summary-in' type='checkbox'  checked><label for='section-d7fabdcc-72b5-4335-8265-14626db5adcd' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>date_time</span></div><div class='xr-var-dims'>(date_time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2002-01-05T11:32:00 ... 2002-01-...</div><input id='attrs-5c76929b-d78d-477e-9b34-8546eb461be4' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-5c76929b-d78d-477e-9b34-8546eb461be4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9c96d558-903a-4280-a792-efefefffe995' class='xr-var-data-in' type='checkbox'><label for='data-9c96d558-903a-4280-a792-efefefffe995' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([&#x27;2002-01-05T11:32:00.000000000&#x27;, &#x27;2002-01-05T11:32:05.000000000&#x27;,
       &#x27;2002-01-05T11:32:10.000000000&#x27;, ..., &#x27;2002-01-07T11:01:40.000000000&#x27;,
       &#x27;2002-01-07T11:01:45.000000000&#x27;, &#x27;2002-01-07T11:01:50.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-f87af1bf-fa10-4475-8850-7b5872a8a88f' class='xr-section-summary-in' type='checkbox'  ><label for='section-f87af1bf-fa10-4475-8850-7b5872a8a88f' class='xr-section-summary' >Attributes: <span>(12)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>sampling :</span></dt><dd>regular</dd><dt><span>sampling_rate :</span></dt><dd>5</dd><dt><span>sampling_rate_unit :</span></dt><dd>s</dd><dt><span>name :</span></dt><dd>P</dd><dt><span>full_name :</span></dt><dd>Depth</dd><dt><span>description :</span></dt><dd>dive depth</dd><dt><span>units :</span></dt><dd>m H2O</dd><dt><span>units_name :</span></dt><dd>meters H2O (salt)</dd><dt><span>units_label :</span></dt><dd>meters</dd><dt><span>column_name :</span></dt><dd>depth</dd><dt><span>axes :</span></dt><dd>D</dd><dt><span>files :</span></dt><dd>dives.csv</dd></dl></div></li></ul></div></div></div></div>
</div>
<p>Plot measured data:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tdrX</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;2002-01-05 21:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;2002-01-06 04:10:00&quot;</span><span class="p">],</span>
          <span class="n">depth_lim</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">95</span><span class="p">],</span> <span class="n">figsize</span><span class="o">=</span><span class="n">_FIG1X1</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/tdrdemo_4_0.png" src="_images/tdrdemo_4_0.png" />
</div>
</div>
<p>Plot concurrent data:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ccvars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;light&quot;</span><span class="p">,</span> <span class="s2">&quot;speed&quot;</span><span class="p">]</span>
<span class="n">tdrX</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;2002-01-05 21:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;2002-01-06 04:10:00&quot;</span><span class="p">],</span>
          <span class="n">depth_lim</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">95</span><span class="p">],</span> <span class="n">concur_vars</span><span class="o">=</span><span class="n">ccvars</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="n">_FIG3X1</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/tdrdemo_5_0.png" src="_images/tdrdemo_5_0.png" />
</div>
</div>
</div>
<div class="section" id="calibrate-measurements">
<h2>Calibrate measurements<a class="headerlink" href="#calibrate-measurements" title="Permalink to this headline">¶</a></h2>
<p>Calibration of TDR measurements involves the following steps, which rely on
data from pressure sensors (barometers):</p>
<div class="section" id="zero-offset-correction-zoc-of-depth-measurements">
<h3>Zero offset correction (ZOC) of depth measurements<a class="headerlink" href="#zero-offset-correction-zoc-of-depth-measurements" title="Permalink to this headline">¶</a></h3>
<p>Using the “offset” method here for speed performance reasons:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Helper dict to set parameter values</span>
<span class="n">pars</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;offset_zoc&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;dry_thr&quot;</span><span class="p">:</span> <span class="mi">70</span><span class="p">,</span>
        <span class="s2">&quot;wet_thr&quot;</span><span class="p">:</span> <span class="mi">3610</span><span class="p">,</span>
        <span class="s2">&quot;dive_thr&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;dive_model&quot;</span><span class="p">:</span> <span class="s2">&quot;unimodal&quot;</span><span class="p">,</span>
        <span class="s2">&quot;smooth_par&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
        <span class="s2">&quot;knot_factor&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="s2">&quot;descent_crit_q&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;ascent_crit_q&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>

<span class="n">tdrX</span><span class="o">.</span><span class="n">zoc</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">pars</span><span class="p">[</span><span class="s2">&quot;offset_zoc&quot;</span><span class="p">])</span>

<span class="c1"># Plot ZOC job</span>
<span class="n">tdrX</span><span class="o">.</span><span class="n">plot_zoc</span><span class="p">(</span><span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;2002-01-05 21:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;2002-01-06 04:10:00&quot;</span><span class="p">],</span>
              <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">6</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/tdrdemo_6_0.png" src="_images/tdrdemo_6_0.png" />
</div>
</div>
</div>
<div class="section" id="detection-of-wet-vs-dry-phases">
<h3>Detection of wet vs dry phases<a class="headerlink" href="#detection-of-wet-vs-dry-phases" title="Permalink to this headline">¶</a></h3>
<p>Periods of missing depth measurements longer than <cite>dry_thr</cite> are considered
dry phases, whereas periods that are briefer than <cite>wet_thr</cite> are not
considered to represent a transition to a wet phase.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_wet</span><span class="p">(</span><span class="n">dry_thr</span><span class="o">=</span><span class="n">pars</span><span class="p">[</span><span class="s2">&quot;dry_thr&quot;</span><span class="p">],</span> <span class="n">wet_thr</span><span class="o">=</span><span class="n">pars</span><span class="p">[</span><span class="s2">&quot;wet_thr&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
<p>Other options, not explored here, include providing a boolean mask Series
to indicate which periods to consider wet phases (argument <cite>wet_cond</cite>), and
whether to linearly interpolate depth through wet phases with duration
below <cite>wet_thr</cite> (argument <cite>interp_wet</cite>).</p>
</div>
<div class="section" id="detection-of-dive-events">
<h3>Detection of dive events<a class="headerlink" href="#detection-of-dive-events" title="Permalink to this headline">¶</a></h3>
<p>When depth measurements are greater than <cite>dive_thr</cite>, a dive event is deemed
to have started, ending when measurements cross that threshold again.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_dives</span><span class="p">(</span><span class="n">dive_thr</span><span class="o">=</span><span class="n">pars</span><span class="p">[</span><span class="s2">&quot;dive_thr&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
</div>
</div>
</div>
<div class="section" id="detection-of-dive-phases">
<h3>Detection of dive phases<a class="headerlink" href="#detection-of-dive-phases" title="Permalink to this headline">¶</a></h3>
<p>Two methods for dive phase detection are available (“unimodal” and
“smooth_spline”), and this demo uses the default “unimodal” method:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_dive_phases</span><span class="p">(</span><span class="n">dive_model</span><span class="o">=</span><span class="n">pars</span><span class="p">[</span><span class="s2">&quot;dive_model&quot;</span><span class="p">],</span>
                        <span class="n">smooth_par</span><span class="o">=</span><span class="n">pars</span><span class="p">[</span><span class="s2">&quot;smooth_par&quot;</span><span class="p">],</span>
                        <span class="n">knot_factor</span><span class="o">=</span><span class="n">pars</span><span class="p">[</span><span class="s2">&quot;knot_factor&quot;</span><span class="p">],</span>
                        <span class="n">descent_crit_q</span><span class="o">=</span><span class="n">pars</span><span class="p">[</span><span class="s2">&quot;descent_crit_q&quot;</span><span class="p">],</span>
                        <span class="n">ascent_crit_q</span><span class="o">=</span><span class="n">pars</span><span class="p">[</span><span class="s2">&quot;ascent_crit_q&quot;</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="n">tdrX</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>Time-Depth Recorder -- Class TDR object
Source File          /opt/hostedtoolcache/Python/3.8.5/x64/lib/python3.8/site-packages/skdiveMove/tests/data/ag_mk7_2002_022.nc
Sampling interval    0 days 00:00:05
Number of Samples    34199
Sampling Begins      2002-01-05 11:32:00
Sampling Ends        2002-01-07 11:01:50
Total duration       1 days 23:29:50
Measured depth range [-4.0,91.0]
Other variables      [&#39;light&#39;, &#39;temperature&#39;, &#39;speed&#39;]
Attributes:
                          animal_id: Ag_022
              animal_species_common: Antarctic fur seal
             animal_species_science: Arctocephalus gazella
                 data_creation_date: 2020-07-13 17:00:00
                        data_format: CSV
                        data_nfiles: 1
                        data_source: dives.csv
       dep_device_regional_settings: YYYY-mm-dd HH:MM:SS
                   dep_device_tzone: +5
                             dep_id: ag_mk7_2002_022
              deploy_device_time_on: 2002-01-05 11:32:00
                         deploy_lat: 51.9833294
                    deploy_locality: Iles Crozet, Southern Indian Ocean
                         deploy_lon: -46.416665
                      deploy_method: glued
                        device_make: Wildlife Computers
                       device_model: MK7
                        device_type: archival
                   project_date_beg: 2000-11-01
                   project_date_end: 2003-04-30
                       project_name: Antarctic and Subantarctic fur seal foraging/energetics
               provider_affiliation: Centre d&#39;Etudes Biologiques de Chize, France
                     provider_email: spluque@gmail.com
                   provider_license: AGPLv3
                      provider_name: Sebastian Luque
                       sensors_list: pressure,light,temperature,speed
ZOC method:          offset
ZOC parameters:      {&#39;offset&#39;: 3}
Wet/Dry parameters:  {&#39;dry_thr&#39;: 70, &#39;wet_thr&#39;: 3610}
Dives parameters:    {&#39;dive_thr&#39;: 3, &#39;dive_model&#39;: &#39;unimodal&#39;, &#39;smooth_par&#39;: 0.1, &#39;knot_factor&#39;: 3, &#39;descent_crit_q&#39;: 0, &#39;ascent_crit_q&#39;: 0}
Speed calibration coefficients: (a=None, b=None)
</pre></div>
</div>
</div>
</div>
<p>Alternatively, all these steps can be performed together via the
<cite>calibrate</cite> function:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">skdive</span><span class="o">.</span><span class="n">calibrate</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>Help on function calibrate in module skdiveMove.calibrate_tdr:

calibrate(tdr_file, config_file=None)
    Perform all major TDR calibration operations
    
    Parameters
    ----------
    tdr_file : str, Path or xarray.backends.*DataStore
        As first argument for :func:`xarray.load_dataset`.
    config_file : str
        A valid string path for TDR calibration configuration file.
    
    Returns
    -------
    out : TDR

</pre></div>
</div>
</div>
</div>
<p>which is demonstrated in <a class="reference internal" href="boutsdemo.html#boutsdemo-label"><span class="std std-ref">Bout analysis</span></a>.</p>
</div>
<div class="section" id="plot-dive-phases">
<h3>Plot dive phases<a class="headerlink" href="#plot-dive-phases" title="Permalink to this headline">¶</a></h3>
<p>Once TDR data are properly calibrated and phases detected, results can be
visualized:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tdrX</span><span class="o">.</span><span class="n">plot_phases</span><span class="p">(</span><span class="n">diveNo</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">300</span><span class="p">)),</span> <span class="n">surface</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="n">_FIG1X1</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/tdrdemo_11_0.png" src="_images/tdrdemo_11_0.png" />
</div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot dive model for a dive</span>
<span class="n">tdrX</span><span class="o">.</span><span class="n">plot_dive_model</span><span class="p">(</span><span class="n">diveNo</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/tdrdemo_12_0.png" src="_images/tdrdemo_12_0.png" />
</div>
</div>
</div>
<div class="section" id="calibrate-speed-measurements">
<h3>Calibrate speed measurements<a class="headerlink" href="#calibrate-speed-measurements" title="Permalink to this headline">¶</a></h3>
<p>In addition to the calibration procedure described above, other variables
in the data set may also need to be calibrated.  <cite>skdiveMove</cite> provides
support for calibrating speed sensor data, by taking advantage of its
relationship with the rate of change in depth in the vertical dimension.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="c1"># Consider only changes in depth larger than 2 m</span>
<span class="n">tdrX</span><span class="o">.</span><span class="n">calibrate_speed</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tdrX</span><span class="o">.</span><span class="n">speed_calib_fit</span><span class="o">.</span><span class="n">summary</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>                         QuantReg Regression Results                          
==============================================================================
Dep. Variable:                      y   Pseudo R-squared:              0.07433
Model:                       QuantReg   Bandwidth:                      0.2129
Method:                 Least Squares   Sparsity:                        2.682
Date:                Tue, 11 Aug 2020   No. Observations:                 2108
Time:                        02:09:15   Df Residuals:                     2106
                                        Df Model:                            1
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
Intercept      0.3163      0.049      6.405      0.000       0.219       0.413
x              0.6872      0.049     13.902      0.000       0.590       0.784
==============================================================================
</pre></div>
</div>
<img alt="_images/tdrdemo_13_1.png" src="_images/tdrdemo_13_1.png" />
</div>
</div>
<p>Notice processing steps have been appended to the <cite>history</cite> attribute of
the <cite>DataArray</cite>:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">tdrX</span><span class="o">.</span><span class="n">get_depth</span><span class="p">(</span><span class="s2">&quot;zoc&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;xarray.DataArray &#39;depth&#39; (date_time: 34199)&gt;
array([+nan, +nan, +nan, ..., +nan, +nan, +nan])
Coordinates:
  * date_time  (date_time) datetime64[ns] 2002-01-05T11:32:00 ... 2002-01-07T...
Attributes:
    sampling:            regular
    sampling_rate:       5
    sampling_rate_unit:  s
    name:                P
    full_name:           Depth
    description:         dive depth
    units:               m H2O
    units_name:          meters H2O (salt)
    units_label:         meters
    column_name:         depth
    axes:                D
    files:               dives.csv
    history:             ZOC
</pre></div>
</div>
</div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">tdrX</span><span class="o">.</span><span class="n">get_speed</span><span class="p">(</span><span class="s2">&quot;calibrated&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;xarray.DataArray &#39;speed&#39; (date_time: 34199)&gt;
array([+nan, +nan, +nan, ..., +nan, +nan, +nan])
Coordinates:
  * date_time  (date_time) datetime64[ns] 2002-01-05T11:32:00 ... 2002-01-07T...
Attributes:
    sampling:            regular
    sampling_rate:       5
    sampling_rate_unit:  s
    name:                S
    full_name:           Speed
    description:         speed with respect to medium
    units:               m/s
    units_name:          meters per second
    units_label:         meters m/s
    column_name:         speed
    axes:                F
    files:               dives.csv
    history:             speed_calib_fit
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="access-attributes-of-tdr-instance">
<h2>Access attributes of <cite>TDR</cite> instance<a class="headerlink" href="#access-attributes-of-tdr-instance" title="Permalink to this headline">¶</a></h2>
<p>Following calibration, use the different accessor methods:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Time series of the wet/dry phases</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tdrX</span><span class="o">.</span><span class="n">wet_dry</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>                     phase_id phase_label
date_time                                
2002-01-05 11:32:00         1           L
2002-01-05 11:32:05         1           L
2002-01-05 11:32:10         1           L
2002-01-05 11:32:15         1           L
2002-01-05 11:32:20         1           L
...                       ...         ...
2002-01-07 11:01:30         7           L
2002-01-07 11:01:35         7           L
2002-01-07 11:01:40         7           L
2002-01-07 11:01:45         7           L
2002-01-07 11:01:50         7           L

[34199 rows x 2 columns]
</pre></div>
</div>
</div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">tdrX</span><span class="o">.</span><span class="n">get_phases_params</span><span class="p">(</span><span class="s2">&quot;wet_dry&quot;</span><span class="p">)[</span><span class="s2">&quot;dry_thr&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>70
</pre></div>
</div>
</div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">tdrX</span><span class="o">.</span><span class="n">get_phases_params</span><span class="p">(</span><span class="s2">&quot;wet_dry&quot;</span><span class="p">)[</span><span class="s2">&quot;wet_thr&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>3610
</pre></div>
</div>
</div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">tdrX</span><span class="o">.</span><span class="n">get_dives_details</span><span class="p">(</span><span class="s2">&quot;row_ids&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>                     dive_id  postdive_id dive_phase
date_time                                           
2002-01-05 11:32:00        0            0          X
2002-01-05 11:32:05        0            0          X
2002-01-05 11:32:10        0            0          X
2002-01-05 11:32:15        0            0          X
2002-01-05 11:32:20        0            0          X
...                      ...          ...        ...
2002-01-07 11:01:30        0          426          X
2002-01-07 11:01:35        0          426          X
2002-01-07 11:01:40        0          426          X
2002-01-07 11:01:45        0          426          X
2002-01-07 11:01:50        0          426          X

[34199 rows x 3 columns]
</pre></div>
</div>
</div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">tdrX</span><span class="o">.</span><span class="n">get_dives_details</span><span class="p">(</span><span class="s2">&quot;spline_derivs&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>                                   y
1   0 days 00:00:00            1.449
    0 days 00:00:01.363636364  1.386
    0 days 00:00:02.727272727  1.223
    0 days 00:00:04.090909091  0.953
    0 days 00:00:05.454545455  0.594
...                              ...
426 0 days 00:02:38.465346535 -0.935
    0 days 00:02:40.099009901 -0.967
    0 days 00:02:41.732673267 -0.992
    0 days 00:02:43.366336634 -1.011
    0 days 00:02:45              NaN

[10920 rows x 1 columns]
</pre></div>
</div>
</div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">tdrX</span><span class="o">.</span><span class="n">get_dives_details</span><span class="p">(</span><span class="s2">&quot;crit_vals&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>         descent_crit  ascent_crit  descent_crit_rate  ascent_crit_rate
dive_id                                                                
1                   1            2          1.989e-01        -1.989e-01
2                  11           12          5.317e-02        -2.508e-03
3                  15           21          7.406e-04        -1.047e-01
4                  16           17          4.277e-03        -2.780e-02
5                   3            4          1.012e-01        -2.485e-02
...               ...          ...                ...               ...
422                10           17          1.857e-03        -5.450e-04
423                 9           16          8.120e-03        -1.982e-01
424                 8           13          2.544e-01        -1.630e-01
425                11           15          3.591e-03        -7.462e-02
426                14           15          4.773e-02        -7.283e-02

[426 rows x 4 columns]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="time-budgets">
<h2>Time budgets<a class="headerlink" href="#time-budgets" title="Permalink to this headline">¶</a></h2>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">tdrX</span><span class="o">.</span><span class="n">time_budget</span><span class="p">(</span><span class="n">ignore_z</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ignore_du</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>                         beg phase_label                 end
phase_id                                                    
1        2002-01-05 11:32:00           L 2002-01-05 11:39:40
2        2002-01-05 11:39:45           W 2002-01-05 11:42:05
3        2002-01-05 11:42:10           U 2002-01-05 11:42:10
4        2002-01-05 11:42:15           W 2002-01-05 11:46:10
5        2002-01-05 11:46:15           U 2002-01-05 11:46:15
...                      ...         ...                 ...
2928     2002-01-07 09:06:25           U 2002-01-07 09:06:25
2929     2002-01-07 09:06:30           W 2002-01-07 09:06:55
2930     2002-01-07 09:07:00           U 2002-01-07 09:07:00
2931     2002-01-07 09:07:05           W 2002-01-07 11:00:05
2932     2002-01-07 11:00:10           L 2002-01-07 11:01:50

[2932 rows x 3 columns]
</pre></div>
</div>
</div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">tdrX</span><span class="o">.</span><span class="n">time_budget</span><span class="p">(</span><span class="n">ignore_z</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ignore_du</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>                         beg phase_label                 end
phase_id                                                    
1        2002-01-05 11:32:00           L 2002-01-05 11:39:40
2        2002-01-05 11:39:45           W 2002-01-06 06:30:00
3        2002-01-06 06:30:05           L 2002-01-06 17:01:10
4        2002-01-06 17:01:15           W 2002-01-07 05:00:30
5        2002-01-07 05:00:35           L 2002-01-07 07:34:00
6        2002-01-07 07:34:05           W 2002-01-07 11:00:05
7        2002-01-07 11:00:10           L 2002-01-07 11:01:50
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="dive-statistics">
<h2>Dive statistics<a class="headerlink" href="#dive-statistics" title="Permalink to this headline">¶</a></h2>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">tdrX</span><span class="o">.</span><span class="n">dive_stats</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>                begdesc             enddesc              begasc  desctim  \
1   2002-01-05 12:20:15 2002-01-05 12:20:15 2002-01-05 12:20:20      2.5   
2   2002-01-05 21:19:45 2002-01-05 21:20:35 2002-01-05 21:20:40     52.5   
3   2002-01-05 21:22:10 2002-01-05 21:23:20 2002-01-05 21:23:50     72.5   
4   2002-01-05 21:26:25 2002-01-05 21:27:40 2002-01-05 21:27:45     77.5   
5   2002-01-05 21:30:40 2002-01-05 21:30:50 2002-01-05 21:30:55     12.5   
..                  ...                 ...                 ...      ...   
422 2002-01-07 03:54:15 2002-01-07 03:55:00 2002-01-07 03:55:35     47.5   
423 2002-01-07 03:57:35 2002-01-07 03:58:15 2002-01-07 03:58:50     42.5   
424 2002-01-07 04:00:55 2002-01-07 04:01:30 2002-01-07 04:01:55     37.5   
425 2002-01-07 04:04:50 2002-01-07 04:05:40 2002-01-07 04:06:00     52.5   
426 2002-01-07 04:13:40 2002-01-07 04:14:45 2002-01-07 04:14:50     67.5   

     botttim  asctim  divetim  descdist  bottdist  ascdist  ...  ascD_mean  \
1        5.0     2.5     10.0       6.0       0.0      6.0  ...     -1.253   
2        5.0    42.5    100.0      29.0       0.0     29.0  ...     -0.630   
3       30.0    72.5    175.0      63.0       8.0     67.0  ...     -0.849   
4        5.0    82.5    165.0      67.0       1.0     66.0  ...     -0.769   
5        5.0     7.5     25.0       7.0       0.0      7.0  ...     -0.716   
..       ...     ...      ...       ...       ...      ...  ...        ...   
422     35.0    57.5    140.0      54.0      10.0     54.0  ...     -0.851   
423     35.0    52.5    130.0      54.0       9.0     59.0  ...     -1.041   
424     25.0    77.5    140.0      57.0      20.0     77.0  ...     -0.917   
425     20.0    67.5    140.0      77.0      12.0     70.0  ...     -0.989   
426      5.0    87.5    160.0      86.0       2.0     84.0  ...     -0.930   

     ascD_std  ascD_min  ascD_25%  ascD_50%  ascD_75%  ascD_max  \
1       0.222    -1.449    -1.402    -1.305    -1.156    -0.953   
2       0.175    -0.810    -0.740    -0.701    -0.572    -0.152   
3       0.153    -1.172    -0.929    -0.807    -0.759    -0.482   
4       0.216    -1.055    -0.949    -0.777    -0.654    -0.134   
5       0.139    -0.810    -0.807    -0.786    -0.680    -0.438   
..        ...       ...       ...       ...       ...       ...   
422     0.225    -1.140    -1.008    -0.887    -0.713    -0.213   
423     0.387    -1.832    -1.255    -0.936    -0.729    -0.539   
424     0.382    -1.822    -0.958    -0.745    -0.713    -0.163   
425     0.359    -1.655    -1.224    -0.883    -0.766    -0.153   
426     0.319    -1.619    -1.063    -0.827    -0.708    -0.315   

       postdive_dur  postdive_tdist  postdive_mean_speed  
1   0 days 08:59:15       50785.609                1.575  
2   0 days 00:00:40          27.279                0.682  
3   0 days 00:01:15          63.263                0.844  
4   0 days 00:01:25         161.248                1.897  
5   0 days 00:00:25          39.568                1.583  
..              ...             ...                  ...  
422 0 days 00:00:55          37.836                0.688  
423 0 days 00:01:05          32.042                0.534  
424 0 days 00:01:30          16.169                0.190  
425 0 days 00:06:25        -107.598               -0.291  
426 0 days 06:45:30       -4925.427               -0.329  

[426 rows x 46 columns]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="dive-stamps">
<h2>Dive stamps<a class="headerlink" href="#dive-stamps" title="Permalink to this headline">¶</a></h2>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">tdrX</span><span class="o">.</span><span class="n">stamp_dives</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>         phase_id                 beg                 end
dive_id                                                  
1               2 2002-01-05 12:20:15 2002-01-06 03:50:40
2               2 2002-01-05 12:20:15 2002-01-06 03:50:40
3               2 2002-01-05 12:20:15 2002-01-06 03:50:40
4               2 2002-01-05 12:20:15 2002-01-06 03:50:40
5               2 2002-01-05 12:20:15 2002-01-06 03:50:40
...           ...                 ...                 ...
422             4 2002-01-06 17:31:35 2002-01-07 04:16:15
423             4 2002-01-06 17:31:35 2002-01-07 04:16:15
424             4 2002-01-06 17:31:35 2002-01-07 04:16:15
425             4 2002-01-06 17:31:35 2002-01-07 04:16:15
426             4 2002-01-06 17:31:35 2002-01-07 04:16:15

[426 rows x 3 columns]
</pre></div>
</div>
</div>
</div>
<p>Feel free to download a copy of this demo
(<a class="reference download internal" download="" href="_downloads/e452a3f23c3782fd4c41504412edb33c/tdrdemo.py">tdrdemo.py</a>).</p>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/skdiveMove_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Diving behaviour analysis</a><ul>
<li><a class="reference internal" href="#reading-data-files">Reading data files</a></li>
<li><a class="reference internal" href="#calibrate-measurements">Calibrate measurements</a><ul>
<li><a class="reference internal" href="#zero-offset-correction-zoc-of-depth-measurements">Zero offset correction (ZOC) of depth measurements</a></li>
<li><a class="reference internal" href="#detection-of-wet-vs-dry-phases">Detection of wet vs dry phases</a></li>
<li><a class="reference internal" href="#detection-of-dive-events">Detection of dive events</a></li>
<li><a class="reference internal" href="#detection-of-dive-phases">Detection of dive phases</a></li>
<li><a class="reference internal" href="#plot-dive-phases">Plot dive phases</a></li>
<li><a class="reference internal" href="#calibrate-speed-measurements">Calibrate speed measurements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#access-attributes-of-tdr-instance">Access attributes of <cite>TDR</cite> instance</a></li>
<li><a class="reference internal" href="#time-budgets">Time budgets</a></li>
<li><a class="reference internal" href="#dive-statistics">Dive statistics</a></li>
<li><a class="reference internal" href="#dive-stamps">Dive stamps</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">scikit-diveMove Documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="boutsdemo.html"
                        title="next chapter">Bout analysis</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/tdrdemo.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="boutsdemo.html" title="Bout analysis"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="scikit-diveMove Documentation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">skdiveMove 0.1.8 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Diving behaviour analysis</a></li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Sebastian Luque.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.0.
    </div>
<div class="footer">
  scikit-diveMove icon created by B. Agustín Amenábar Larraín
  from Noun Project
</div>

  </body>
</html>