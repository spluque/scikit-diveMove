
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Time-Depth Recorder time series &#8212; skdiveMove 0.3.3 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../_static/thebelab.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=d5a15cff"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'modules/tdr';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Bout analysis" href="bouts.html" />
    <link rel="prev" title="Read and write metadata" href="metadata.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="https://raw.githubusercontent.com/spluque/scikit-diveMove/master/docs/source/.static/skdiveMove_logo_1line.png" class="logo__image only-light" alt="skdiveMove 0.3.3 documentation - Home"/>
    <script>document.write(`<img src="https://raw.githubusercontent.com/spluque/scikit-diveMove/master/docs/source/.static/skdiveMove_logo_1line.png" class="logo__image only-dark" alt="skdiveMove 0.3.3 documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../demos/index.html">
                        Demos
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        Modules
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/spluque/scikit-diveMove" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../demos/index.html">
                        Demos
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="index.html">
                        Modules
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/spluque/scikit-diveMove" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="metadata.html">Read and write metadata</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Time-Depth Recorder time series</a></li>
<li class="toctree-l1"><a class="reference internal" href="bouts.html">Bout analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="imutools.html">Inertial Measurement Unit time series</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Modules</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Time-Depth...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="module-skdiveMove">
<span id="time-depth-recorder-time-series"></span><h1>Time-Depth Recorder time series<a class="headerlink" href="#module-skdiveMove" title="Link to this heading">#</a></h1>
<p>Top-level class for interacting with diveMove</p>
<p>The <a class="reference internal" href="#skdiveMove.TDR" title="skdiveMove.TDR"><code class="xref py py-class docutils literal notranslate"><span class="pre">TDR</span></code></a> class aims to be a comprehensive class to encapsulate the
processing of <cite>TDR</cite> records from a NetCDF data file.</p>
<p>Processing includes detection and quantification of periods of major
activities in a TDR record, calibrating depth readings to generate
summaries of diving behaviour. These procedures include wet/dry phase
detection, zero-offset correction (ZOC) of depth, detection of dives, as
well as proper labelling of the latter, among others utilities for the
analysis of TDR records.</p>
<p>All core procedures are encapsulated in <a class="reference internal" href="#skdiveMove.TDR" title="skdiveMove.TDR"><code class="xref py py-class docutils literal notranslate"><span class="pre">TDR</span></code></a>, and are controlled by
a set of user-defined variables in a configuration file, and systematically
executed systematically by function <a class="reference internal" href="#skdiveMove.calibrate" title="skdiveMove.calibrate"><code class="xref py py-func docutils literal notranslate"><span class="pre">calibrate()</span></code></a>. This function can be
used as a template for custom processing using different
sequences. User-defined variables can also be directly specified as a
dictionary, which is a class attribute. The standard approach follows the
logical processing sequence described below:</p>
<ol class="arabic simple">
<li><p>Zero-offset correction</p></li>
<li><p>Detection of wet phases</p></li>
<li><p>Detection of dives</p></li>
<li><p>Detection of dive phases</p></li>
<li><p>Speed calibration (if required)</p></li>
<li><p>Calculation of statistics</p></li>
</ol>
<p>Class <a class="reference internal" href="#skdiveMove.TDR" title="skdiveMove.TDR"><code class="xref py py-class docutils literal notranslate"><span class="pre">TDR</span></code></a> methods implement these steps. This module instantiates
an <cite>R</cite> session to interact with low-level functions and methods of package
<cite>diveMove</cite>.</p>
<section id="calibration-and-phase-detection">
<h2>Calibration and phase detection<a class="headerlink" href="#calibration-and-phase-detection" title="Link to this heading">#</a></h2>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#skdiveMove.TDR.read_netcdf" title="skdiveMove.TDR.read_netcdf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.read_netcdf</span></code></a>(tdr_file[, depth_name, ...])</p></td>
<td><p>Instantiate object by loading Dataset from NetCDF file</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#skdiveMove.TDR.zoc" title="skdiveMove.TDR.zoc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.zoc</span></code></a>([method])</p></td>
<td><p>Apply zero offset correction to depth measurements</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#skdiveMove.TDR.detect_wet" title="skdiveMove.TDR.detect_wet"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.detect_wet</span></code></a>([dry_thr, wet_cond, wet_thr, ...])</p></td>
<td><p>Detect wet/dry activity phases</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#skdiveMove.TDR.detect_dives" title="skdiveMove.TDR.detect_dives"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.detect_dives</span></code></a>(dive_thr)</p></td>
<td><p>Identify dive events</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#skdiveMove.TDR.detect_dive_phases" title="skdiveMove.TDR.detect_dive_phases"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.detect_dive_phases</span></code></a>(dive_model[, ...])</p></td>
<td><p>Detect dive phases</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#skdiveMove.TDR.calibrate_speed" title="skdiveMove.TDR.calibrate_speed"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.calibrate_speed</span></code></a>([tau, contour_level, z, bad])</p></td>
<td><p>Calibrate speed measurements</p></td>
</tr>
</tbody>
</table>
</section>
<section id="analysis-and-summaries">
<h2>Analysis and summaries<a class="headerlink" href="#analysis-and-summaries" title="Link to this heading">#</a></h2>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#skdiveMove.TDR.dive_stats" title="skdiveMove.TDR.dive_stats"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.dive_stats</span></code></a>([depth_deriv])</p></td>
<td><p>Calculate dive statistics in <cite>TDR</cite> records</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#skdiveMove.TDR.time_budget" title="skdiveMove.TDR.time_budget"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.time_budget</span></code></a>([ignore_z, ignore_du])</p></td>
<td><p>Summary of wet/dry activities at the broadest time scale</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#skdiveMove.TDR.stamp_dives" title="skdiveMove.TDR.stamp_dives"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.stamp_dives</span></code></a>([ignore_z])</p></td>
<td><p>Identify the wet activity phase corresponding to each dive</p></td>
</tr>
</tbody>
</table>
</section>
<section id="plotting">
<h2>Plotting<a class="headerlink" href="#plotting" title="Link to this heading">#</a></h2>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#skdiveMove.TDR.plot" title="skdiveMove.TDR.plot"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.plot</span></code></a>([concur_vars, concur_var_titles])</p></td>
<td><p>Plot <cite>TDR</cite> object</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#skdiveMove.TDR.plot_zoc" title="skdiveMove.TDR.plot_zoc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.plot_zoc</span></code></a>([xlim, ylim])</p></td>
<td><p>Plot zero-offset correction filters</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#skdiveMove.TDR.plot_phases" title="skdiveMove.TDR.plot_phases"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.plot_phases</span></code></a>([diveNo, concur_vars, ...])</p></td>
<td><p>Plot major phases found on <cite>TDR</cite> object</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#skdiveMove.TDR.plot_dive_model" title="skdiveMove.TDR.plot_dive_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.plot_dive_model</span></code></a>([diveNo])</p></td>
<td><p>Plot dive model for selected dive</p></td>
</tr>
</tbody>
</table>
</section>
<section id="accessors">
<h2>Accessors<a class="headerlink" href="#accessors" title="Link to this heading">#</a></h2>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#skdiveMove.TDR.extract_dives" title="skdiveMove.TDR.extract_dives"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.extract_dives</span></code></a>(diveNo, **kwargs)</p></td>
<td><p>Extract TDR data corresponding to a particular set of dives</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#skdiveMove.TDR.get_depth" title="skdiveMove.TDR.get_depth"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.get_depth</span></code></a>([kind])</p></td>
<td><p>Retrieve depth records</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#skdiveMove.TDR.get_dive_deriv" title="skdiveMove.TDR.get_dive_deriv"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.get_dive_deriv</span></code></a>(diveNo[, phase])</p></td>
<td><p>Retrieve depth spline derivative for a given dive</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#skdiveMove.TDR.get_dives_details" title="skdiveMove.TDR.get_dives_details"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.get_dives_details</span></code></a>(key[, columns])</p></td>
<td><p>Accessor for the <cite>dives</cite> attribute</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#skdiveMove.TDR.get_phases_params" title="skdiveMove.TDR.get_phases_params"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.get_phases_params</span></code></a>(key)</p></td>
<td><p>Return parameters used for identifying wet/dry or diving phases.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#skdiveMove.TDR.get_speed" title="skdiveMove.TDR.get_speed"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.get_speed</span></code></a>([kind])</p></td>
<td><p>Retrieve speed records</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#skdiveMove.TDR.get_tdr" title="skdiveMove.TDR.get_tdr"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.get_tdr</span></code></a>([calib_depth, calib_speed])</p></td>
<td><p>Return a copy of <cite>TDR</cite> Dataset</p></td>
</tr>
</tbody>
</table>
</section>
<section id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Link to this heading">#</a></h2>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#skdiveMove.calibrate" title="skdiveMove.calibrate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calibrate</span></code></a>(tdr_file[, config_file])</p></td>
<td><p>Perform all major TDR calibration operations</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#skdiveMove.dump_config_template" title="skdiveMove.dump_config_template"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dump_config_template</span></code></a>(fname)</p></td>
<td><p>Dump configuration template file</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="skdiveMove.TDR">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">skdiveMove.</span></span><span class="sig-name descname"><span class="pre">TDR</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/skdiveMove/tdr.html#TDR"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skdiveMove.TDR" title="Link to this definition">#</a></dt>
<dd><p>Base class encapsulating TDR objects and processing</p>
<p>Comprehensive TDR processing methods.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="skdiveMove.TDR.speed_calib_fit">
<span class="sig-name descname"><span class="pre">speed_calib_fit</span></span><a class="headerlink" href="#skdiveMove.TDR.speed_calib_fit" title="Link to this definition">#</a></dt>
<dd><p>Model object fit by quantile regression for speed calibration.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>quantreg model fit</p>
</dd>
</dl>
</dd></dl>

<p class="rubric">Notes</p>
<p>See <code class="docutils literal notranslate"><span class="pre">help(TDR)</span></code> for inherited attributes. This class extends
<code class="xref py py-class docutils literal notranslate"><span class="pre">TDRPhases</span></code>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2024.3.1.dev0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">xarray.Dataset</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<p>Construct an instance from diveMove example dataset</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skdiveMove.tests</span> <span class="kn">import</span> <span class="n">diveMove2skd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span> <span class="o">=</span> <span class="n">diveMove2skd</span><span class="p">()</span>
</pre></div>
</div>
<p>Plot the <cite>TDR</cite> object</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>  
<span class="go">(&lt;Figure ... 1 Axes&gt;, &lt;Axes: ...&gt;)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.calibrate_speed">
<span class="sig-name descname"><span class="pre">calibrate_speed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contour_level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bad</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[0,</span> <span class="pre">0]</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/skdiveMove/tdr.html#TDR.calibrate_speed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skdiveMove.TDR.calibrate_speed" title="Link to this definition">#</a></dt>
<dd><p>Calibrate speed measurements</p>
<p>Set the <cite>speed_calib_fit</cite> attribute. This method calibrates speed
readings following the procedure outlined in Blackwell et.
al. (1999) <a class="footnote-reference brackets" href="#id2" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tau</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a><em>, </em><em>optional</em>) – Quantile on which to regress speed on rate of depth change.</p></li>
<li><p><strong>contour_level</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a><em>, </em><em>optional</em>) – The mesh obtained from the bivariate kernel density estimation
corresponding to this contour will be used for the quantile
regression to define the calibration line.</p></li>
<li><p><strong>z</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a><em>, </em><em>optional</em>) – Only changes in depth larger than this value will be used for
calibration.</p></li>
<li><p><strong>bad</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Two-element <cite>array_like</cite> indicating that only rates of depth
change and speed greater than the given values should be used
for calibration, respectively.</p></li>
<li><p><strong>**kwargs</strong> – Optional keyword arguments listed below.</p></li>
<li><p><strong>plot</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a><em>, </em><em>default True</em>) – Whether to plot calibration results.</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.Axes</em><em>, </em><em>optional</em>) – A <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.8.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code></a> instance to use as target.
Default is to create one.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">References</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id2" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Blackwell S, Haverl C, Le Boeuf B, Costa D (1999). A method
for calibrating swim-speed recorders.  Marine Mammal Science
15(3):894-905.</p>
</aside>
</aside>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skdiveMove.tests</span> <span class="kn">import</span> <span class="n">diveMove2skd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span> <span class="o">=</span> <span class="n">diveMove2skd</span><span class="p">(</span><span class="n">has_speed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">zoc</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">calibrate_speed</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.detect_dive_phases">
<span class="sig-name descname"><span class="pre">detect_dive_phases</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dive_model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smooth_par</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">knot_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">descent_crit_q</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ascent_crit_q</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skdiveMove.TDR.detect_dive_phases" title="Link to this definition">#</a></dt>
<dd><p>Detect dive phases</p>
<p>Complete filling the <cite>dives</cite> attribute. The process for each dive
begins by taking all observations below the dive detection
threshold, and setting the beginning and end depths to zero, at
time steps prior to the first and after the last, respectively.
The latter ensures that descent and ascent derivatives are
non-negative and non-positive, respectively, so that the end and
beginning of these phases are not truncated. The next step is to
fit a model to each dive. Two models can be chosen for this
purpose: <cite>unimodal</cite> (default) and <cite>smooth.spline</cite> (see Notes).</p>
<p>Both models consist of a cubic spline, and its first derivative is
evaluated to investigate changes in vertical rate. Therefore, at
least 4 observations are required for each dive, so the time series
is linearly interpolated at equally spaced time steps if this limit
is not achieved in the current dive. Wiggles at the beginning and
end of the dive are assumed to be zero offset correction errors, so
depth observations at these extremes are interpolated between zero
and the next observations when this occurs.</p>
<p>This procedure generates a categorical variable with levels <code class="docutils literal notranslate"><span class="pre">D</span></code>,
<code class="docutils literal notranslate"><span class="pre">DB</span></code>, <code class="docutils literal notranslate"><span class="pre">B</span></code>, <code class="docutils literal notranslate"><span class="pre">BA</span></code>, <code class="docutils literal notranslate"><span class="pre">DA</span></code>, <code class="docutils literal notranslate"><span class="pre">A</span></code>, and <code class="docutils literal notranslate"><span class="pre">X</span></code>, breaking the input
into descent, descent/bottom, bottom, bottom/ascent, ascent,
descent/ascent (occurring when no bottom phase can be detected) and
non-dive (surface), respectively.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dive_model</strong> (<em>{&quot;unimodal&quot;</em><em>, </em><em>&quot;smooth.spline&quot;}</em>) – Model to use for each dive for the purpose of dive phase
identification.  One of <cite>smooth.spline</cite> or <cite>unimodal</cite>, to
choose among smoothing spline or unimodal regression. For dives
with less than five observations, smoothing spline regression
is used regardless.</p></li>
<li><p><strong>smooth_par</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a><em>, </em><em>optional</em>) – Amount of smoothing when <code class="docutils literal notranslate"><span class="pre">dive.model=&quot;smooth.spline&quot;</span></code>. If it
is <cite>None</cite>, then the smoothing parameter is determined by
Generalized Cross-validation (GCV). Ignored with default
<code class="docutils literal notranslate"><span class="pre">dive.model=&quot;unimodal&quot;</span></code>.</p></li>
<li><p><strong>knot_factor</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em>, </em><em>optional</em>) – Multiplier for the number of samples in the dive.  This is used
to construct the time predictor for the derivative.</p></li>
<li><p><strong>descent_crit_q</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a><em>, </em><em>optional</em>) – Critical quantile of rates of descent below which descent is
deemed to have ended.</p></li>
<li><p><strong>ascent_crit_q</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a><em>, </em><em>optional</em>) – Critical quantile of rates of ascent above which ascent is
deemed to have started.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>1. Unimodal method: in this default model, the spline is
constrained to be unimodal <a class="footnote-reference brackets" href="#id4" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>, assuming the diver must return to
the surface to breathe. The model is fitted using <cite>R</cite>’s <cite>uniReg</cite>
package. This model and constraint are consistent with the
definition of dives in air-breathers, so is appropriate for this
group of divers. A major advantage of this approach over the next
one is that the degree of smoothing is determined via restricted
maximum likelihood, and has no influence on identifying the
transition between descent and ascent. Therefore, unimodal
regression splines make the latter transition clearer compared to
using smoothing splines. Note that dives with less than five
samples are fit using smoothing splines regardless, as they produce
the same fit as unimodal regression but much faster. Therefore,
ensure that the parameters for that model are appropriate for the
data, although defaults are reasonable.</p>
<p>2. Smooth spline: in this model, specified via
<code class="docutils literal notranslate"><span class="pre">dive_model=&quot;smooth.spline&quot;</span></code>, a smoothing spline is used to model
each dive, using the chosen smoothing parameter. Dive phases
identified via this model, however, are highly sensitive to the
degree of smoothing (<cite>smooth_par</cite>) used, thus making it difficult
to determine what amount of smoothing is adequate.</p>
<p>The first derivative of the spline is evaluated at a set of knots
to calculate the vertical rate throughout the dive and determine
the end of descent and beginning of ascent. This set of knots is
established using a regular time sequence with beginning and end
equal to the extremes of the input sequence, and with length equal
to <span class="math notranslate nohighlight">\(N \times knot\_factor\)</span>. Equivalent procedures are used
for detecting descent and ascent phases.</p>
<p>Once one of the models above has been fitted to each dive, the
quantile corresponding to (<cite>descent_crit_q</cite>) of all the positive
derivatives (rate of descent) at the beginning of the dive is used
as threshold for determining the end of descent. Descent is deemed
to have ended at the <em>first</em> minimum derivative, and the nearest
input time observation is considered to indicate the end of
descent. The sign of the comparisons is reversed for detecting the
ascent. If observed depth to the left and right of the derivative
defining the ascent are the same, the right takes precedence.</p>
<p>The particular dive phase categories are subsequently defined using
simple set operations.</p>
<p class="rubric">References</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id4" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">2</a><span class="fn-bracket">]</span></span>
<p>Koellmann, C., Ickstadt, K. and Fried, R. (2014) Beyond
unimodal regression: modelling multimodality with piecewise
unimodal, mixture or additive regression. Technical Report
8. <a class="reference external" href="https://sfb876.tu-dortmund.de/FORSCHUNG/techreports.html">https://sfb876.tu-dortmund.de/FORSCHUNG/techreports.html</a>,
SFB 876, TU Dortmund</p>
</aside>
</aside>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#skdiveMove.TDR.detect_dives" title="skdiveMove.TDR.detect_dives"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.detect_dives</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<p>ZOC using the “offset” method for convenience</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skdiveMove.tests</span> <span class="kn">import</span> <span class="n">diveMove2skd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span> <span class="o">=</span> <span class="n">diveMove2skd</span><span class="p">(</span><span class="s2">&quot;TDRPhases&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">zoc</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Detect wet/dry phases and dives with 3 m threshold</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_wet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_dives</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Detect dive phases using the “unimodal” method and selected
parameters</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_dive_phases</span><span class="p">(</span><span class="s2">&quot;unimodal&quot;</span><span class="p">,</span> <span class="n">descent_crit_q</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">ascent_crit_q</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">knot_factor</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.detect_dives">
<span class="sig-name descname"><span class="pre">detect_dives</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dive_thr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skdiveMove.TDR.detect_dives" title="Link to this definition">#</a></dt>
<dd><p>Identify dive events</p>
<p>Set the <cite>dives</cite> attribute’s <cite>row_ids</cite> dictionary element, and
update the <cite>wet_act</cite> attribute’s <cite>phases</cite> dictionary
element. Whenever the zero-offset corrected depth in an underwater
phase is below the specified dive threshold.  A new categorical
variable with finer levels of activity is thus generated, including
<code class="docutils literal notranslate"><span class="pre">U</span></code> (underwater), and <code class="docutils literal notranslate"><span class="pre">D</span></code> (diving) in addition to the ones
described above.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dive_thr</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a>) – Threshold depth below which an underwater phase should be
considered a dive.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#skdiveMove.TDR.detect_dive_phases" title="skdiveMove.TDR.detect_dive_phases"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.detect_dive_phases</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<p>ZOC using the <code class="docutils literal notranslate"><span class="pre">offset</span></code> method for convenience</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skdiveMove.tests</span> <span class="kn">import</span> <span class="n">diveMove2skd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span> <span class="o">=</span> <span class="n">diveMove2skd</span><span class="p">(</span><span class="s2">&quot;TDRPhases&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">zoc</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Detect wet/dry phases and dives with 3 m threshold</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_wet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_dives</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.detect_wet">
<span class="sig-name descname"><span class="pre">detect_wet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dry_thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">70</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wet_cond</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wet_thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3610</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interp_wet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skdiveMove.TDR.detect_wet" title="Link to this definition">#</a></dt>
<dd><p>Detect wet/dry activity phases</p>
<p>A categorical variable is created with value <code class="docutils literal notranslate"><span class="pre">L</span></code> (dry) for rows
with null depth samples and value <code class="docutils literal notranslate"><span class="pre">W</span></code> (wet) otherwise. This
assumes that TDRs were programmed to turn off recording of depth
when instrument is dry (typically by means of a salt-water
switch). If this assumption cannot be made for any reason, then a
boolean vector as long as the time series can be supplied to
indicate which observations should be considered wet. The duration
of each of these phases of activity is subsequently calculated.  If
the duration of a dry phase (<code class="docutils literal notranslate"><span class="pre">L</span></code>) is less than a threshold
(configuration variable <cite>dry_thr</cite>), then the values in the factor
for that phase are changed to <code class="docutils literal notranslate"><span class="pre">W</span></code> (wet). The duration of phases
is then recalculated, and if the duration of a phase of wet
activity is less than another threshold (variable <cite>wet_thr</cite>), then
the corresponding value for the factor is changed to <code class="docutils literal notranslate"><span class="pre">Z</span></code> (trivial
wet). The durations of all phases are recalculated a third time to
provide final phase durations.</p>
<p>Some instruments produce a peculiar pattern of missing data near
the surface, at the beginning and/or end of dives. The argument
<cite>interp_wet</cite> may help to rectify this problem by using an
interpolating spline function to impute the missing data,
constraining the result to a minimum depth of zero.  Please note
that this optional step is performed after ZOC and before
identifying dives, so that interpolation is performed through dry
phases coded as wet because their duration was briefer than
<cite>dry_thr</cite>.  Therefore, <cite>dry_thr</cite> must be chosen carefully to avoid
interpolation through legitimate dry periods.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dry_thr</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a><em>, </em><em>optional</em>) – Dry error threshold in seconds. Dry phases shorter than this
threshold will be considered as wet.</p></li>
<li><p><strong>wet_cond</strong> (<em>bool mask</em><em>, </em><em>optional</em>) – A Pandas.Series bool mask indexed as <cite>depth</cite>. It indicates
which observations should be considered wet. If it is not
provided, records with non-missing depth are assumed to
correspond to wet conditions. Default is generated from testing
for non-missing <cite>depth</cite>.</p></li>
<li><p><strong>wet_thr</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a><em>, </em><em>optional</em>) – Wet threshold in seconds. At-sea phases shorter than this
threshold will be considered as trivial wet.</p></li>
<li><p><strong>interp_wet</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a><em>, </em><em>optional</em>) – If <cite>True</cite>, then an interpolating spline function is used to
impute NA depths in wet periods (after ZOC). Use with
caution: it may only be useful in cases where the missing data
pattern in wet periods is restricted to shallow depths near the
beginning and end of dives. This pattern is common in some
satellite-linked <cite>TDRs</cite>.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Unlike <cite>diveMove</cite>, the beginning/ending times for each phase are
not stored with the class instance, as this information can be
retrieved via the <a class="reference internal" href="#skdiveMove.TDR.time_budget" title="skdiveMove.TDR.time_budget"><code class="xref py py-meth docutils literal notranslate"><span class="pre">time_budget()</span></code></a> method.</p>
<p class="rubric">Examples</p>
<p>ZOC using the “offset” method for convenience</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skdiveMove.tests</span> <span class="kn">import</span> <span class="n">diveMove2skd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span> <span class="o">=</span> <span class="n">diveMove2skd</span><span class="p">(</span><span class="s2">&quot;TDRPhases&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">zoc</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Detect wet/dry phases</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_wet</span><span class="p">()</span>
</pre></div>
</div>
<p>Access the “phases” and “dry_thr” attributes</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">wet_dry</span>  
<span class="go">                     phase_id phase_label</span>
<span class="go">date_time</span>
<span class="go">2002-01-05 ...              1           L</span>
<span class="go">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.dive_stats">
<span class="sig-name descname"><span class="pre">dive_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">depth_deriv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/skdiveMove/tdr.html#TDR.dive_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skdiveMove.TDR.dive_stats" title="Link to this definition">#</a></dt>
<dd><p>Calculate dive statistics in <cite>TDR</cite> records</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>depth_deriv</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to compute depth derivative statistics.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>DataFrame indexed by dive number, having the following columns:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">begdesc</span></code>: time stamp for the start of each dive;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enddesc</span></code>: time stamp for the descent’s end;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">begasc</span></code>: time stamp for the beginning of the ascent;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">desctime</span></code>: duration of descent;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">botttim</span></code>: duration of the bottom phase;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">asctim</span></code>: duration of ascent;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">divetim</span></code>: dive duration;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">descdist</span></code>: last descent depth;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bottdist</span></code>: sum of the absolute depth differences while
at the bottom of the dive; a measure of the amount of
“wiggling” while at the bottom;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ascdist</span></code>: first ascent depth;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bottdep_mean</span></code>: mean bottom depth;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bottdep_median</span></code>: median bottom depth;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bottdep_sd</span></code>: standard deviation of bottom depths;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxdep</span></code>: maximum depth;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">desc_tdist</span></code>: descent total distance, estimated from speed;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">desc_mean_speed</span></code>: descent mean speed;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">desc_angle</span></code>: descent mean speed;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bott_tdist</span></code>: total distance at the bottom, estimated
from speed;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bott_mean_speed</span></code>: mean speed at the bottom;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">asc_tdist</span></code>: ascent total distance, estimated from speed;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">asc_mean_speed</span></code>: ascent mean speed;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">asc_angle</span></code>: ascent angle, relative to bottom plane;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">postdive_dur</span></code>: postdive duration;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">postdive_tdist</span></code>: postdive total distance, estimated from
speed;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">postdive_mean_speed</span></code>: postdive mean speed.</p></li>
</ul>
</div></blockquote>
<p>If <code class="docutils literal notranslate"><span class="pre">depth_deriv=True</span></code> (default), 21 additional columns with
the minimum, first quartile, median, mean, third quartile,
maximum, and standard deviation of the depth derivative for
each phase of the dive are included.</p>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.2)">pandas.DataFrame</a></p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This method is homologous to diveMove’s <cite>diveStats</cite> function.</p>
<p class="rubric">Examples</p>
<p>ZOC using the “filter” method</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skdiveMove.tests</span> <span class="kn">import</span> <span class="n">diveMove2skd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span> <span class="o">=</span> <span class="n">diveMove2skd</span><span class="p">(</span><span class="n">has_speed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Window lengths and probabilities</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">DB</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">K</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5760</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">zoc</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_wet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_dives</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_dive_phases</span><span class="p">(</span><span class="s2">&quot;unimodal&quot;</span><span class="p">,</span> <span class="n">descent_crit_q</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">ascent_crit_q</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">knot_factor</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">dive_stats</span><span class="p">()</span>  
<span class="go">                begdesc  ... postdive_mean_speed</span>
<span class="go">1   2002-01-05 ...                      1.398859</span>
<span class="go">2   ...</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.extract_dives">
<span class="sig-name descname"><span class="pre">extract_dives</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">diveNo</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/skdiveMove/tdr.html#TDR.extract_dives"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skdiveMove.TDR.extract_dives" title="Link to this definition">#</a></dt>
<dd><p>Extract TDR data corresponding to a particular set of dives</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>diveNo</strong> (<em>array_like</em><em>, </em><em>optional</em>) – List of dive numbers (1-based) to plot.</p></li>
<li><p><strong>**kwargs</strong> – Optional keyword arguments passed to <a class="reference internal" href="#skdiveMove.TDR.get_tdr" title="skdiveMove.TDR.get_tdr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_tdr()</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2024.3.1.dev0)">xarray.Dataset</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#skdiveMove.TDR.get_tdr" title="skdiveMove.TDR.get_tdr"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.get_tdr</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skdiveMove.tests</span> <span class="kn">import</span> <span class="n">diveMove2skd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span> <span class="o">=</span> <span class="n">diveMove2skd</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">zoc</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_wet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_dives</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_dive_phases</span><span class="p">(</span><span class="s2">&quot;unimodal&quot;</span><span class="p">,</span> <span class="n">descent_crit_q</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">ascent_crit_q</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">knot_factor</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">extract_dives</span><span class="p">(</span><span class="n">diveNo</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>  
<span class="go">&lt;xarray.Dataset&gt; ...</span>
<span class="go">Dimensions: ...</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.get_depth">
<span class="sig-name descname"><span class="pre">get_depth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'measured'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/skdiveMove/tdr.html#TDR.get_depth"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skdiveMove.TDR.get_depth" title="Link to this definition">#</a></dt>
<dd><p>Retrieve depth records</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>kind</strong> (<em>{&quot;measured&quot;</em><em>, </em><em>&quot;zoc&quot;}</em>) – Which depth to retrieve.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.DataArray.html#xarray.DataArray" title="(in xarray v2024.3.1.dev0)">xarray.DataArray</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#skdiveMove.TDR.get_tdr" title="skdiveMove.TDR.get_tdr"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.get_tdr</span></code></a>, <a class="reference internal" href="#skdiveMove.TDR.get_speed" title="skdiveMove.TDR.get_speed"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.get_speed</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.get_dive_deriv">
<span class="sig-name descname"><span class="pre">get_dive_deriv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">diveNo</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phase</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skdiveMove.TDR.get_dive_deriv" title="Link to this definition">#</a></dt>
<dd><p>Retrieve depth spline derivative for a given dive</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>diveNo</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – Dive number to retrieve derivative for.</p></li>
<li><p><strong>phase</strong> (<em>{&quot;descent&quot;</em><em>, </em><em>&quot;bottom&quot;</em><em>, </em><em>&quot;ascent&quot;}</em>) – If provided, the dive phase to retrieve data for.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>out</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.2)">pandas.DataFrame</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.get_dives_details">
<span class="sig-name descname"><span class="pre">get_dives_details</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skdiveMove.TDR.get_dives_details" title="Link to this definition">#</a></dt>
<dd><p>Accessor for the <cite>dives</cite> attribute</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>{&quot;row_ids&quot;</em><em>, </em><em>&quot;model&quot;</em><em>, </em><em>&quot;splines&quot;</em><em>, </em><em>&quot;spline_derivs&quot;</em><em>, </em><em>crit_vals}</em>) – Name of the key to retrieve.</p></li>
<li><p><strong>columns</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Names of the columns of the dataframe in <cite>key</cite>, when applicable.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.get_phases_params">
<span class="sig-name descname"><span class="pre">get_phases_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skdiveMove.TDR.get_phases_params" title="Link to this definition">#</a></dt>
<dd><p>Return parameters used for identifying wet/dry or diving phases.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>{'wet_dry'</em><em>, </em><em>'dives'}</em>) – </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>out</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.get_speed">
<span class="sig-name descname"><span class="pre">get_speed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'measured'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/skdiveMove/tdr.html#TDR.get_speed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skdiveMove.TDR.get_speed" title="Link to this definition">#</a></dt>
<dd><p>Retrieve speed records</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>kind</strong> (<em>{&quot;measured&quot;</em><em>, </em><em>&quot;calibrated&quot;}</em>) – Type of speed to retrieve.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.DataArray.html#xarray.DataArray" title="(in xarray v2024.3.1.dev0)">xarray.DataArray</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#skdiveMove.TDR.get_tdr" title="skdiveMove.TDR.get_tdr"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.get_tdr</span></code></a>, <a class="reference internal" href="#skdiveMove.TDR.get_depth" title="skdiveMove.TDR.get_depth"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.get_depth</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.get_tdr">
<span class="sig-name descname"><span class="pre">get_tdr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">calib_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calib_speed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/skdiveMove/tdr.html#TDR.get_tdr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skdiveMove.TDR.get_tdr" title="Link to this definition">#</a></dt>
<dd><p>Return a copy of <cite>TDR</cite> Dataset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>calib_depth</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to return calibrated depth measurements.</p></li>
<li><p><strong>calib_speed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to return calibrated speed measurements.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2024.3.1.dev0)">xarray.Dataset</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#skdiveMove.TDR.get_depth" title="skdiveMove.TDR.get_depth"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.get_depth</span></code></a>, <a class="reference internal" href="#skdiveMove.TDR.get_speed" title="skdiveMove.TDR.get_speed"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.get_speed</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">concur_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">concur_var_titles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/skdiveMove/tdr.html#TDR.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skdiveMove.TDR.plot" title="Link to this definition">#</a></dt>
<dd><p>Plot <cite>TDR</cite> object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>concur_vars</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><em>list</em></a><em>, </em><em>optional</em>) – String or list of strings with names of columns in input to
select additional data to plot.</p></li>
<li><p><strong>concur_var_titles</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><em>list</em></a><em>, </em><em>optional</em>) – String or list of strings with y-axis labels for <cite>concur_vars</cite>.</p></li>
<li><p><strong>**kwargs</strong> – Optional keyword arguments passed to plotting function,
including those listed below. Additional arguments are passed
to underlying plotting method.</p></li>
<li><p><strong>xlim</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.12)"><em>tuple</em></a><em> of </em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a><em>)</em>) – Minimum and maximum limits for <code class="docutils literal notranslate"><span class="pre">x</span></code> axis.  Ignored when
<code class="docutils literal notranslate"><span class="pre">concur_vars=None</span></code>.</p></li>
<li><p><strong>ylim</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.12)"><em>tuple</em></a><em> of </em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a><em>)</em>) – Minimum and maximum limits for <code class="docutils literal notranslate"><span class="pre">y</span></code> axis for data other than
depth.</p></li>
<li><p><strong>depth_lim</strong> (<em>array_like</em><em> of </em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a><em>)</em>) – Minimum and maximum limits for depth to plot.</p></li>
<li><p><strong>xlab</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – Label for <code class="docutils literal notranslate"><span class="pre">x</span></code> axis.</p></li>
<li><p><strong>ylab_depth</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – Label for <code class="docutils literal notranslate"><span class="pre">y</span></code> axis for depth.</p></li>
<li><p><strong>xlab_format</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – Format string for formatting the <code class="docutils literal notranslate"><span class="pre">x</span></code> axis.</p></li>
<li><p><strong>sunrise_time</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – Time of sunrise, in 24 hr format.  This is used for shading night
time.</p></li>
<li><p><strong>sunset_time</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – Time of sunset, in 24 hr format.  This is used for shading night
time.</p></li>
<li><p><strong>night_col</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – Color for shading night time.</p></li>
<li><p><strong>dry_time</strong> (<a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.2)"><em>pandas.DataFrame</em></a>) – Two-column DataFrame with beginning and ending times corresponding
to periods considered to be dry.</p></li>
<li><p><strong>phase_cat</strong> (<a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.html#pandas.Series" title="(in pandas v2.2.2)"><em>pandas.Series</em></a>) – Categorical series dividing rows into sections.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://matplotlib.org/stable/api/figure_api.html#matplotlib.figure.Figure" title="(in Matplotlib v3.8.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Figure</span></code></a>,
<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.8.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code></a> instances.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.12)">tuple</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skdiveMove.tests</span> <span class="kn">import</span> <span class="n">diveMove2skd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span> <span class="o">=</span> <span class="n">diveMove2skd</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xlim</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;2002-01-05 21:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;2002-01-06 04:10:00&quot;</span><span class="p">],</span>
<span class="gp">... </span>          <span class="n">depth_lim</span><span class="o">=</span><span class="p">[</span><span class="mi">95</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>  
<span class="go">(&lt;Figure ... with 1 Axes&gt;, &lt;Axes: ...&#39;&gt;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.plot_dive_model">
<span class="sig-name descname"><span class="pre">plot_dive_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">diveNo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/skdiveMove/tdr.html#TDR.plot_dive_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skdiveMove.TDR.plot_dive_model" title="Link to this definition">#</a></dt>
<dd><p>Plot dive model for selected dive</p>
<p>Diagnostic double-panel plot of dive models for selected dives. The
top panel shows depth against time, the cubic spline smoother, the
identified descent and ascent phases (which form the basis for
identifying the rest of the dive phases), while the bottom panel
shows the first derivative of the smooth trace.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>diveNo</strong> (<em>array_like</em><em>, </em><em>optional</em>) – List of dive numbers (1-based) to plot.</p></li>
<li><p><strong>**kwargs</strong> – Optional keyword arguments passed to
<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.subplots.html#matplotlib.pyplot.subplots" title="(in Matplotlib v3.8.4)"><code class="xref py py-func docutils literal notranslate"><span class="pre">subplots()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://matplotlib.org/stable/api/figure_api.html#matplotlib.figure.Figure" title="(in Matplotlib v3.8.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Figure</span></code></a>,
<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.8.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code></a> instances.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.12)">tuple</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#skdiveMove.TDR.detect_dive_phases" title="skdiveMove.TDR.detect_dive_phases"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.detect_dive_phases</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skdiveMove.tests</span> <span class="kn">import</span> <span class="n">diveMove2skd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span> <span class="o">=</span> <span class="n">diveMove2skd</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">zoc</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_wet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_dives</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_dive_phases</span><span class="p">(</span><span class="s2">&quot;unimodal&quot;</span><span class="p">,</span> <span class="n">descent_crit_q</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">ascent_crit_q</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">knot_factor</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">plot_dive_model</span><span class="p">(</span><span class="n">diveNo</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
<span class="gp">... </span>                     <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>  
<span class="go">(&lt;Figure ... with 2 Axes&gt;, (&lt;Axes: ...&gt;, &lt;Axes: ...&gt;))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.plot_phases">
<span class="sig-name descname"><span class="pre">plot_phases</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">diveNo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">concur_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">concur_var_titles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">surface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/skdiveMove/tdr.html#TDR.plot_phases"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skdiveMove.TDR.plot_phases" title="Link to this definition">#</a></dt>
<dd><p>Plot major phases found on <cite>TDR</cite> object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>diveNo</strong> (<em>array_like</em><em>, </em><em>optional</em>) – List of dive numbers (1-based) to plot.</p></li>
<li><p><strong>concur_vars</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><em>list</em></a><em>, </em><em>optional</em>) – String or list of strings with names of columns in input to
select additional data to plot.</p></li>
<li><p><strong>concur_var_titles</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><em>list</em></a><em>, </em><em>optional</em>) – String or list of strings with y-axis labels for <cite>concur_vars</cite>.</p></li>
<li><p><strong>surface</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to plot surface readings.</p></li>
<li><p><strong>**kwargs</strong> – Optional keyword arguments passed to plotting function (see
<a class="reference internal" href="#skdiveMove.TDR.plot" title="skdiveMove.TDR.plot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">plot()</span></code></a>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://matplotlib.org/stable/api/figure_api.html#matplotlib.figure.Figure" title="(in Matplotlib v3.8.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Figure</span></code></a>,
<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.8.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code></a> instances.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.12)">tuple</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#skdiveMove.TDR.detect_wet" title="skdiveMove.TDR.detect_wet"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.detect_wet</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skdiveMove.tests</span> <span class="kn">import</span> <span class="n">diveMove2skd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span> <span class="o">=</span> <span class="n">diveMove2skd</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">zoc</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_wet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_dives</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_dive_phases</span><span class="p">(</span><span class="s2">&quot;unimodal&quot;</span><span class="p">,</span> <span class="n">descent_crit_q</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">ascent_crit_q</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">knot_factor</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">plot_phases</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">300</span><span class="p">)),</span>
<span class="gp">... </span>                 <span class="n">surface</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  
<span class="go">(&lt;Figure ... with 1 Axes&gt;, &lt;Axes: ...&gt;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.plot_zoc">
<span class="sig-name descname"><span class="pre">plot_zoc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xlim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/skdiveMove/tdr.html#TDR.plot_zoc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skdiveMove.TDR.plot_zoc" title="Link to this definition">#</a></dt>
<dd><p>Plot zero-offset correction filters</p>
<p>Compare the zero-offset corrected depth with the uncorrected
signal, or the progress attained in each of the filters during
recursive filtering for zero-offset correction, as illustrated in
Luque and Fried (2011) <a class="footnote-reference brackets" href="#id7" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xlim</strong> (<em>array_like</em><em>, </em><em>optional</em>) – array_like with minimum and maximum limits for <code class="docutils literal notranslate"><span class="pre">x</span></code>- and
<code class="docutils literal notranslate"><span class="pre">y</span></code>-axis, respectively.</p></li>
<li><p><strong>ylim</strong> (<em>array_like</em><em>, </em><em>optional</em>) – array_like with minimum and maximum limits for <code class="docutils literal notranslate"><span class="pre">x</span></code>- and
<code class="docutils literal notranslate"><span class="pre">y</span></code>-axis, respectively.</p></li>
<li><p><strong>**kwargs</strong> – Optional keyword arguments passed to
<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.subplots.html#matplotlib.pyplot.subplots" title="(in Matplotlib v3.8.4)"><code class="xref py py-func docutils literal notranslate"><span class="pre">subplots()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://matplotlib.org/stable/api/figure_api.html#matplotlib.figure.Figure" title="(in Matplotlib v3.8.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Figure</span></code></a>,
<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.8.4)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code></a> instances.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.12)">tuple</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#skdiveMove.TDR.zoc" title="skdiveMove.TDR.zoc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TDR.zoc</span></code></a></p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skdiveMove.tests</span> <span class="kn">import</span> <span class="n">diveMove2skd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span> <span class="o">=</span> <span class="n">diveMove2skd</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Window lengths and probabilities</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">DB</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">K</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5760</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">zoc</span><span class="p">(</span><span class="s2">&quot;filter&quot;</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="n">K</span><span class="p">,</span> <span class="n">probs</span><span class="o">=</span><span class="n">P</span><span class="p">,</span> <span class="n">depth_bounds</span><span class="o">=</span><span class="n">DB</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_wet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_dives</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_dive_phases</span><span class="p">(</span><span class="s2">&quot;unimodal&quot;</span><span class="p">,</span> <span class="n">descent_crit_q</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">ascent_crit_q</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">knot_factor</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">plot_zoc</span><span class="p">()</span>  
<span class="go">(&lt;Figure ... with 3 Axes&gt;, array([&lt;Axes: ...&#39;&gt;,</span>
<span class="go">    &lt;Axes: ...&#39;&gt;, &lt;Axes: ...&gt;], dtype=object))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.read_netcdf">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">read_netcdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tdr_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'depth'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'timestamp'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subsample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">has_speed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skdiveMove.TDR.read_netcdf" title="Link to this definition">#</a></dt>
<dd><p>Instantiate object by loading Dataset from NetCDF file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tdr_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – As first argument for <a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.load_dataset.html#xarray.load_dataset" title="(in xarray v2024.3.1.dev0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">xarray.load_dataset()</span></code></a>.</p></li>
<li><p><strong>depth_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em>, </em><em>optional</em>) – Name of data variable with depth measurements. Default: “depth”.</p></li>
<li><p><strong>time_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em>, </em><em>optional</em>) – Name of the time dimension in the dataset.</p></li>
<li><p><strong>subsample</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em>, </em><em>optional</em>) – Subsample dataset at given frequency specification.  See pandas
offset aliases.</p></li>
<li><p><strong>has_speed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a><em>, </em><em>optional</em>) – Weather data includes speed measurements. Column name must be
one of [“velocity”, “speed”].  Default: False.</p></li>
<li><p><strong>**kwargs</strong> – Optional keyword arguments passed to <a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.load_dataset.html#xarray.load_dataset" title="(in xarray v2024.3.1.dev0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">xarray.load_dataset()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.Dataset.html#xarray.Dataset" title="(in xarray v2024.3.1.dev0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">xarray.Dataset</span></code></a>, <a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.load_dataset.html#xarray.load_dataset" title="(in xarray v2024.3.1.dev0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">xarray.load_dataset</span></code></a></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>obj</strong> – Class matches the caller.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>TDRSource, ZOC, TDRPhases, or <a class="reference internal" href="#skdiveMove.TDR" title="skdiveMove.TDR">TDR</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.stamp_dives">
<span class="sig-name descname"><span class="pre">stamp_dives</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ignore_z</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skdiveMove.TDR.stamp_dives" title="Link to this definition">#</a></dt>
<dd><p>Identify the wet activity phase corresponding to each dive</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ignore_z</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to ignore trivial aquatic periods.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>out</strong> – DataFrame indexed by dive ID, and three columns identifying
which phase thy are in, and the beginning and ending time
stamps.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.2)">pandas.DataFrame</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skdiveMove.tests</span> <span class="kn">import</span> <span class="n">diveMove2skd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span> <span class="o">=</span> <span class="n">diveMove2skd</span><span class="p">(</span><span class="s2">&quot;TDRPhases&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">zoc</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_wet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_dives</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_dive_phases</span><span class="p">(</span><span class="s2">&quot;unimodal&quot;</span><span class="p">,</span> <span class="n">descent_crit_q</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">ascent_crit_q</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">knot_factor</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">stamp_dives</span><span class="p">(</span><span class="n">ignore_z</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  
<span class="go">         phase_id                 beg                 end</span>
<span class="go">dive_id</span>
<span class="go">1               2 2002-01-05      ... 2002-01-06      ...</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.time_budget">
<span class="sig-name descname"><span class="pre">time_budget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ignore_z</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_du</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skdiveMove.TDR.time_budget" title="Link to this definition">#</a></dt>
<dd><p>Summary of wet/dry activities at the broadest time scale</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ignore_z</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to ignore trivial aquatic periods.</p></li>
<li><p><strong>ignore_du</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to ignore diving and underwater periods.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>out</strong> – DataFrame indexed by phase id, with categorical activity label
for each phase, and beginning and ending times.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.2)">pandas.DataFrame</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skdiveMove.tests</span> <span class="kn">import</span> <span class="n">diveMove2skd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span> <span class="o">=</span> <span class="n">diveMove2skd</span><span class="p">(</span><span class="s2">&quot;TDRPhases&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">zoc</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_wet</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_dives</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">detect_dive_phases</span><span class="p">(</span><span class="s2">&quot;unimodal&quot;</span><span class="p">,</span> <span class="n">descent_crit_q</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">ascent_crit_q</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">knot_factor</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">time_budget</span><span class="p">(</span><span class="n">ignore_z</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="gp">... </span>                 <span class="n">ignore_du</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  
<span class="go">                         beg phase_label                 end</span>
<span class="go">phase_id</span>
<span class="go">1        2002-01-05      ...           L 2002-01-05      ...</span>
<span class="go">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="skdiveMove.TDR.zoc">
<span class="sig-name descname"><span class="pre">zoc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'filter'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#skdiveMove.TDR.zoc" title="Link to this definition">#</a></dt>
<dd><p>Apply zero offset correction to depth measurements</p>
<p>This procedure is required to correct drifts in the pressure
transducer of TDR records and noise in depth measurements. Three
methods are available to perform this correction.</p>
<p>Method <cite>offset</cite> can be used when the offset is known in advance,
and this value is used to correct the entire time series.
Therefore, <code class="docutils literal notranslate"><span class="pre">offset=0</span></code> specifies no correction.</p>
<p>Method <cite>filter</cite> implements a smoothing/filtering mechanism where
running quantiles can be applied to depth measurements in a
recursive manner <a class="footnote-reference brackets" href="#id7" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>.  The method calculates the first running
quantile defined by the first probability in a given sequence on a
moving window of size specified by the first integer supplied in a
second sequence.  The next running quantile, defined by the second
supplied probability and moving window size, is applied to the
smoothed/filtered depth measurements from the previous step, and so
on. The corrected depth measurements (d) are calculated as:</p>
<div class="math notranslate nohighlight">
\[d = d_{0} - d_{n}\]</div>
<p>where <span class="math notranslate nohighlight">\(d_{0}\)</span> is original depth and <span class="math notranslate nohighlight">\(d_{n}\)</span> is the last
smoothed/filtered depth.  This method is under development, but
reasonable results can be achieved by applying two filters (see
Examples). The default <cite>na_rm=True</cite> works well when there are no
level shifts between non-NA phases in the data, but <cite>na_rm=False</cite>
is better in the presence of such shifts. In other words, there is
no reason to pollute the moving window with null values when
non-null phases can be regarded as a continuum, so splicing
non-null phases makes sense. Conversely, if there are level shifts
between non-null phases, then it is better to retain null phases to
help the algorithm recognize the shifts while sliding the
window(s). The search for the surface can be limited to specified
bounds during smoothing/filtering, so that observations outside
these bounds are interpolated using the bounded smoothed/filtered
series.</p>
<p>Once the entire record has been zero-offset corrected, remaining
depths below zero, are set to zero, as these are assumed to
indicate values at the surface.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> (<em>{&quot;filter&quot;</em><em>, </em><em>&quot;offset&quot;}</em>) – Name of method to use for zero offset correction.</p></li>
<li><p><strong>**kwargs</strong> – Optional keyword arguments passed to the chosen method
(<code class="xref py py-meth docutils literal notranslate"><span class="pre">_offset_depth()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">_filter_depth()</span></code>)</p></li>
</ul>
</dd>
</dl>
<p class="rubric">References</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id7" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id5">1</a>,<a role="doc-backlink" href="#id6">2</a>)</span>
<p>Luque, S.P. and Fried, R. (2011) Recursive filtering for
zero offset correction of diving depth time series. PLoS ONE
6:e15850.</p>
</aside>
</aside>
<p class="rubric">Examples</p>
<p>ZOC using the “offset” method</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">skdiveMove.tests</span> <span class="kn">import</span> <span class="n">diveMove2skd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span> <span class="o">=</span> <span class="n">diveMove2skd</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">zoc</span><span class="p">(</span><span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>Using the “filter” method</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Window lengths and probabilities</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">DB</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">K</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5760</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">zoc</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="n">K</span><span class="p">,</span> <span class="n">probs</span><span class="o">=</span><span class="n">P</span><span class="p">,</span> <span class="n">depth_bounds</span><span class="o">=</span><span class="n">DB</span><span class="p">)</span>
</pre></div>
</div>
<p>Plot the filters that were applied</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tdrX</span><span class="o">.</span><span class="n">plot_zoc</span><span class="p">(</span><span class="n">ylim</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>  
<span class="go">(&lt;Figure ... with 3 Axes&gt;, array([&lt;Axes: ...&gt;,</span>
<span class="go">    &lt;Axes: ...&gt;, &lt;Axes: ...&gt;], dtype=object))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skdiveMove.TDR.depth">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">depth</span></span><a class="headerlink" href="#skdiveMove.TDR.depth" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skdiveMove.TDR.depth_zoc">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">depth_zoc</span></span><a class="headerlink" href="#skdiveMove.TDR.depth_zoc" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skdiveMove.TDR.speed">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">speed</span></span><a class="headerlink" href="#skdiveMove.TDR.speed" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skdiveMove.TDR.wet_dry">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">wet_dry</span></span><a class="headerlink" href="#skdiveMove.TDR.wet_dry" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="skdiveMove.TDR.zoc_params">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">zoc_params</span></span><a class="headerlink" href="#skdiveMove.TDR.zoc_params" title="Link to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skdiveMove.calibrate">
<span class="sig-prename descclassname"><span class="pre">skdiveMove.</span></span><span class="sig-name descname"><span class="pre">calibrate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tdr_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/skdiveMove/tdr.html#calibrate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skdiveMove.calibrate" title="Link to this definition">#</a></dt>
<dd><p>Perform all major TDR calibration operations</p>
<p>Detect periods of major activities in a <cite>TDR</cite> object, calibrate depth
readings, and speed if appropriate, in preparation for subsequent
summaries of diving behaviour.</p>
<p>This function is a convenience wrapper around <a class="reference internal" href="#skdiveMove.TDR.detect_wet" title="skdiveMove.TDR.detect_wet"><code class="xref py py-meth docutils literal notranslate"><span class="pre">detect_wet()</span></code></a>,
<a class="reference internal" href="#skdiveMove.TDR.detect_dives" title="skdiveMove.TDR.detect_dives"><code class="xref py py-meth docutils literal notranslate"><span class="pre">detect_dives()</span></code></a>, <a class="reference internal" href="#skdiveMove.TDR.detect_dive_phases" title="skdiveMove.TDR.detect_dive_phases"><code class="xref py py-meth docutils literal notranslate"><span class="pre">detect_dive_phases()</span></code></a>,
<a class="reference internal" href="#skdiveMove.TDR.zoc" title="skdiveMove.TDR.zoc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">zoc()</span></code></a>, and <a class="reference internal" href="#skdiveMove.TDR.calibrate_speed" title="skdiveMove.TDR.calibrate_speed"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calibrate_speed()</span></code></a>.  It performs
wet/dry phase detection, zero-offset correction of depth, detection of
dives, as well as proper labelling of the latter, and calibrates speed
data if appropriate.</p>
<p>Due to the complexity of this procedure, and the number of settings
required for it, a calibration configuration file (JSON) is used to
guide the operations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tdr_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em>, </em><em>Path</em><em> or </em><em>xarray.backends.*DataStore</em>) – As first argument for <a class="reference external" href="https://docs.xarray.dev/en/stable/generated/xarray.load_dataset.html#xarray.load_dataset" title="(in xarray v2024.3.1.dev0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">xarray.load_dataset()</span></code></a>.</p></li>
<li><p><strong>config_file</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) – A valid string path for TDR calibration configuration file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>out</strong></p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#skdiveMove.TDR" title="skdiveMove.TDR">TDR</a></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#skdiveMove.dump_config_template" title="skdiveMove.dump_config_template"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dump_config_template</span></code></a></dt><dd><p>configuration template</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="skdiveMove.dump_config_template">
<span class="sig-prename descclassname"><span class="pre">skdiveMove.</span></span><span class="sig-name descname"><span class="pre">dump_config_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fname</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/skdiveMove/calibconfig.html#dump_config_template"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#skdiveMove.dump_config_template" title="Link to this definition">#</a></dt>
<dd><p>Dump configuration template file</p>
<p>Dump a json configuration template file to set up TDR calibration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em> or </em><em>file-like</em>) – A valid string path, or <cite>file-like</cite> object, for output file.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dump_config_template</span><span class="p">(</span><span class="s2">&quot;tdr_config.json&quot;</span><span class="p">)</span>  
</pre></div>
</div>
<p>Edit the file to your specifications.</p>
</dd></dl>

</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="metadata.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Read and write metadata</p>
      </div>
    </a>
    <a class="right-next"
       href="bouts.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Bout analysis</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calibration-and-phase-detection">Calibration and phase detection</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analysis-and-summaries">Analysis and summaries</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting">Plotting</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#accessors">Accessors</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#functions">Functions</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR"><code class="docutils literal notranslate"><span class="pre">TDR</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.speed_calib_fit"><code class="docutils literal notranslate"><span class="pre">TDR.speed_calib_fit</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.calibrate_speed"><code class="docutils literal notranslate"><span class="pre">TDR.calibrate_speed()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.detect_dive_phases"><code class="docutils literal notranslate"><span class="pre">TDR.detect_dive_phases()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.detect_dives"><code class="docutils literal notranslate"><span class="pre">TDR.detect_dives()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.detect_wet"><code class="docutils literal notranslate"><span class="pre">TDR.detect_wet()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.dive_stats"><code class="docutils literal notranslate"><span class="pre">TDR.dive_stats()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.extract_dives"><code class="docutils literal notranslate"><span class="pre">TDR.extract_dives()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.get_depth"><code class="docutils literal notranslate"><span class="pre">TDR.get_depth()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.get_dive_deriv"><code class="docutils literal notranslate"><span class="pre">TDR.get_dive_deriv()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.get_dives_details"><code class="docutils literal notranslate"><span class="pre">TDR.get_dives_details()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.get_phases_params"><code class="docutils literal notranslate"><span class="pre">TDR.get_phases_params()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.get_speed"><code class="docutils literal notranslate"><span class="pre">TDR.get_speed()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.get_tdr"><code class="docutils literal notranslate"><span class="pre">TDR.get_tdr()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.plot"><code class="docutils literal notranslate"><span class="pre">TDR.plot()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.plot_dive_model"><code class="docutils literal notranslate"><span class="pre">TDR.plot_dive_model()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.plot_phases"><code class="docutils literal notranslate"><span class="pre">TDR.plot_phases()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.plot_zoc"><code class="docutils literal notranslate"><span class="pre">TDR.plot_zoc()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.read_netcdf"><code class="docutils literal notranslate"><span class="pre">TDR.read_netcdf()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.stamp_dives"><code class="docutils literal notranslate"><span class="pre">TDR.stamp_dives()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.time_budget"><code class="docutils literal notranslate"><span class="pre">TDR.time_budget()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.zoc"><code class="docutils literal notranslate"><span class="pre">TDR.zoc()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.depth"><code class="docutils literal notranslate"><span class="pre">TDR.depth</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.depth_zoc"><code class="docutils literal notranslate"><span class="pre">TDR.depth_zoc</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.speed"><code class="docutils literal notranslate"><span class="pre">TDR.speed</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.wet_dry"><code class="docutils literal notranslate"><span class="pre">TDR.wet_dry</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.TDR.zoc_params"><code class="docutils literal notranslate"><span class="pre">TDR.zoc_params</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.calibrate"><code class="docutils literal notranslate"><span class="pre">calibrate()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#skdiveMove.dump_config_template"><code class="docutils literal notranslate"><span class="pre">dump_config_template()</span></code></a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/modules/tdr.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2020-2024, Sebastian Luque.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
  <p class="sphinx-version">
    scikit-diveMove icon inspired by B. Agustín Amenábar
    Larraín's <a href="https://thenounproject.com/browse/creator/agustin.amenabar/icons/?p=1">wave
    icon</a>  <br/>
  </p>
</div>
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.2.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>